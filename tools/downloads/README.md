# Trip æ•°æ®æ‰¹é‡ä¸‹è½½å·¥å…·

## ðŸ“– æ¦‚è¿°

è¿™ä¸ªå·¥å…·ç”¨äºŽä»Ž drfile trip ç©ºé—´æ‰¹é‡ä¸‹è½½è¡Œç¨‹æ•°æ®ã€‚

**æ ¸å¿ƒç‰¹æ€§**ï¼šé»˜è®¤åªä¸‹è½½æ¯ä¸ª trip ä¸­çš„ `bags/important` å’Œ `configs` ç›®å½•ï¼Œå¤§å¹…å‡å°‘ä¸‹è½½æ—¶é—´å’Œå­˜å‚¨ç©ºé—´ã€‚

## ðŸŽ¯ ä¸‹è½½æ¨¡å¼

### 1ï¸âƒ£ é€‰æ‹©æ€§ä¸‹è½½ï¼ˆé»˜è®¤ï¼‰

**ä¸‹è½½å†…å®¹**ï¼ˆæŒ‰é¡ºåºï¼‰ï¼š
1. âœ… `configs/` â†’ ä¸‹è½½åˆ° `configs/` ç›®å½•ï¼ˆå…ˆä¸‹è½½ï¼Œå°æ–‡ä»¶ï¼‰
2. âœ… `bags/important/` â†’ ä¸‹è½½åˆ° `bags/important/` ç›®å½•ï¼ˆåŽä¸‹è½½ï¼‰
- âŒ å…¶ä»–ç›®å½•ï¼ˆä¸ä¸‹è½½ï¼‰

**ä¼˜ç‚¹**ï¼š
- å¿«é€Ÿä¸‹è½½ï¼ˆåªä¸‹è½½éœ€è¦çš„æ•°æ®ï¼‰
- èŠ‚çœç£ç›˜ç©ºé—´
- é€‚åˆå¤§å¤šæ•°æ ‡å®šå’Œæµ‹è¯•åœºæ™¯
- æ™ºèƒ½ä¸‹è½½é¡ºåºï¼ˆå…ˆä¸‹è½½é…ç½®æ–‡ä»¶ï¼Œä¾¿äºŽå¿«é€ŸæŸ¥çœ‹ï¼‰

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
python3 download_trips.py YR-P789-19_20260213_012754
```

### 2ï¸âƒ£ å®Œæ•´ä¸‹è½½

**ä¸‹è½½å†…å®¹**ï¼š
- âœ… æ•´ä¸ª trip çš„æ‰€æœ‰æ•°æ®

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
python3 download_trips.py --full YR-P789-19_20260213_012754
```

## ðŸš€ å¿«é€Ÿå¼€å§‹

### åŸºæœ¬ç”¨æ³•

```bash
# è¿›å…¥å·¥å…·ç›®å½•
cd /mnt/drtraining/user/dahailu/code/BEVCalib/tools/downloads

# ä¸‹è½½å•ä¸ª tripï¼ˆé€‰æ‹©æ€§ä¸‹è½½ï¼‰
python3 download_trips.py YR-P789-19_20260213_012754

# ä¸‹è½½å¤šä¸ª trips
python3 download_trips.py YR-P789-19_20260213_012754 YR-B26A1-1_20251117_031232

# ä¸‹è½½å®Œæ•´ trip
python3 download_trips.py --full YR-P789-19_20260213_012754
```

### ä»Žæ–‡ä»¶æ‰¹é‡ä¸‹è½½

**æ­¥éª¤ 1ï¼šåˆ›å»º trip åˆ—è¡¨æ–‡ä»¶**

åˆ›å»º `my_trips.txt`ï¼š

```text
# Trip åˆ—è¡¨ï¼ˆæ¯è¡Œä¸€ä¸ªï¼‰
YR-P789-19_20260213_012754
YR-B26A1-1_20251117_031232
YR-XXX-XX_XXXXXXXX_XXXXXX

# ä»¥ # å¼€å¤´çš„è¡Œä¼šè¢«å¿½ç•¥
```

**æ­¥éª¤ 2ï¼šæ‰§è¡Œä¸‹è½½**

```bash
python3 download_trips.py --file my_trips.txt
```

### å…¶ä»–å¸¸ç”¨å‘½ä»¤

```bash
# æ£€æŸ¥ trips æ˜¯å¦å­˜åœ¨ï¼ˆä¸ä¸‹è½½ï¼‰
python3 download_trips.py --check-only YR-P789-19_20260213_012754

# æŒ‡å®šè‡ªå®šä¹‰è¾“å‡ºç›®å½•
python3 download_trips.py -o /custom/path YR-P789-19_20260213_012754

# äº¤äº’æ¨¡å¼ï¼ˆé€ä¸ªè¾“å…¥ trip åç§°ï¼‰
python3 download_trips.py --interactive

# æŸ¥çœ‹å®Œæ•´å¸®åŠ©
python3 download_trips.py --help
```

## ðŸ“ è¾“å‡ºç»“æž„

### é€‰æ‹©æ€§ä¸‹è½½ï¼ˆé»˜è®¤ï¼‰

```
tools/downloads/trips/
â”œâ”€â”€ YR-P789-19_20260213_012754/
â”‚   â”œâ”€â”€ bags/
â”‚   â”‚   â””â”€â”€ important/               # âœ“ ä¿æŒ important ç›®å½•
â”‚   â”‚       â”œâ”€â”€ Tiny_Topic_Group/
â”‚   â”‚       â”‚   â”œâ”€â”€ data_001.bag
â”‚   â”‚       â”‚   â””â”€â”€ ...
â”‚   â”‚       â”œâ”€â”€ Medium_Topic_Group/
â”‚   â”‚       â””â”€â”€ ...
â”‚   â””â”€â”€ configs/                     # âœ“ configs ç›®å½•
â”‚       â”œâ”€â”€ calib.yaml
â”‚       â”œâ”€â”€ sensor_config.yaml
â”‚       â””â”€â”€ ...
â””â”€â”€ YR-B26A1-1_20251117_031232/
    â”œâ”€â”€ bags/important/
    â””â”€â”€ configs/
```

### å®Œæ•´ä¸‹è½½ï¼ˆ--fullï¼‰

```
tools/downloads/trips/
â”œâ”€â”€ YR-P789-19_20260213_012754/
â”‚   â”œâ”€â”€ bags/                   # âœ“ ä¸‹è½½æ‰€æœ‰å­ç›®å½•
â”‚   â”‚   â”œâ”€â”€ important/
â”‚   â”‚   â”œâ”€â”€ debug/
â”‚   â”‚   â”œâ”€â”€ raw/
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ configs/                # âœ“ ä¸‹è½½
â”‚   â”œâ”€â”€ logs/                   # âœ“ ä¸‹è½½
â”‚   â”œâ”€â”€ images/                 # âœ“ ä¸‹è½½
â”‚   â””â”€â”€ ...                     # âœ“ ä¸‹è½½æ‰€æœ‰
```

## ðŸ“ æ—¥å¿—

æ¯æ¬¡è¿è¡Œéƒ½ä¼šç”Ÿæˆè¯¦ç»†çš„æ—¥å¿—æ–‡ä»¶ï¼š

```
tools/downloads/download_trips_20260228_144548.log
```

æ—¥å¿—åŒ…å«ï¼š
- ä¸‹è½½è¿›åº¦
- æ–‡ä»¶ç»Ÿè®¡
- é”™è¯¯ä¿¡æ¯
- ä¸‹è½½ç»“æžœæ±‡æ€»

## âš™ï¸ å‘½ä»¤è¡Œå‚æ•°

| å‚æ•° | è¯´æ˜Ž |
|------|------|
| `trips` | trip åç§°åˆ—è¡¨ï¼ˆä½ç½®å‚æ•°ï¼‰ |
| `-f, --file FILE` | ä»Žæ–‡ä»¶è¯»å– trip åˆ—è¡¨ |
| `-i, --interactive` | äº¤äº’æ¨¡å¼ï¼ˆé€ä¸ªè¾“å…¥ï¼‰ |
| `-o, --output DIR` | æŒ‡å®šè¾“å‡ºç›®å½•ï¼ˆé»˜è®¤ï¼š`./trips/`ï¼‰ |
| `--check-only` | åªæ£€æŸ¥ trip æ˜¯å¦å­˜åœ¨ï¼Œä¸ä¸‹è½½ |
| `--full` | ä¸‹è½½å®Œæ•´ tripï¼ˆé»˜è®¤åªä¸‹è½½ bags/important å’Œ configsï¼‰ |
| `-h, --help` | æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯ |

## ðŸ’¡ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1ï¼šæ ‡å®šæ•°æ®å‡†å¤‡
```bash
# åªéœ€è¦ configs å’Œ important bags
python3 download_trips.py YR-P789-19_20260213_012754
```

### åœºæ™¯ 2ï¼šæ‰¹é‡ä¸‹è½½å¤šä¸ªè¡Œç¨‹
```bash
# ä»Žæ–‡ä»¶æ‰¹é‡ä¸‹è½½
cat > trips_batch1.txt << EOF
YR-P789-19_20260213_012754
YR-B26A1-1_20251117_031232
YR-C001-5_20260101_120000
EOF

python3 download_trips.py --file trips_batch1.txt
```

### åœºæ™¯ 3ï¼šå®Œæ•´æ•°æ®åˆ†æž
```bash
# éœ€è¦æ‰€æœ‰æ•°æ®æ—¶ä½¿ç”¨ --full
python3 download_trips.py --full YR-P789-19_20260213_012754
```

### åœºæ™¯ 4ï¼šä¸‹è½½å‰éªŒè¯
```bash
# å…ˆæ£€æŸ¥ trips æ˜¯å¦éƒ½å­˜åœ¨
python3 download_trips.py --check-only \
  YR-P789-19_20260213_012754 \
  YR-B26A1-1_20251117_031232

# ç¡®è®¤åŽå†ä¸‹è½½
python3 download_trips.py \
  YR-P789-19_20260213_012754 \
  YR-B26A1-1_20251117_031232
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é»˜è®¤è¡Œä¸ºå˜æ›´**ï¼šè„šæœ¬é»˜è®¤åªä¸‹è½½ `bags/important` å’Œ `configs`ï¼Œå¦‚éœ€å®Œæ•´æ•°æ®è¯·ä½¿ç”¨ `--full`
2. **ç½‘ç»œè¦æ±‚**ï¼šéœ€è¦è®¿é—®å…¬å¸å†…ç½‘æ‰èƒ½ä½¿ç”¨ drfile
3. **è®¤è¯é…ç½®**ï¼šé¦–æ¬¡ä½¿ç”¨éœ€è¿è¡Œ `drfile configure` é…ç½®è®¤è¯ä¿¡æ¯
4. **ç£ç›˜ç©ºé—´**ï¼šç¡®ä¿æœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´
5. **ç›®å½•å­˜åœ¨**ï¼šå¦‚æžœç›®æ ‡ç›®å½•å·²å­˜åœ¨ï¼Œä¼šç»§ç»­ä¸‹è½½ï¼ˆdrfile ä¼šå¤„ç†é‡å¤æ–‡ä»¶ï¼‰
6. **ä¸­æ–­æ¢å¤**ï¼šæŒ‰ `Ctrl+C` å¯ä¸­æ–­ä¸‹è½½ï¼Œå·²ä¸‹è½½çš„æ•°æ®ä¼šä¿ç•™

## ðŸ”§ å‰ç½®è¦æ±‚

### 1. å®‰è£… drfile

```bash
sudo apt update
sudo apt install deeproute-drfile-dev
```

### 2. é…ç½®è®¤è¯

```bash
drfile configure
```

æŒ‰æç¤ºè¾“å…¥ï¼š
- Username: OA ç”¨æˆ·å
- Password: OA å¯†ç 
- Endpoint: https://drplatform-backend.deeproute.cnï¼ˆé»˜è®¤ï¼‰
- Format: tableï¼ˆé»˜è®¤ï¼‰
- Public: Falseï¼ˆé»˜è®¤ï¼‰

### 3. éªŒè¯å®‰è£…

```bash
drfile --version
drfile list trip:/
```

## ðŸ“Š ç¤ºä¾‹è¾“å‡º

```
2026-02-28 14:45:48,689 - INFO - æ—¥å¿—æ–‡ä»¶: download_trips_20260228_144548.log
2026-02-28 14:45:48,690 - INFO - é€‰æ‹©æ€§ä¸‹è½½æ¨¡å¼ï¼šåªä¸‹è½½ bags/important å’Œ configs ç›®å½•
2026-02-28 14:45:48,693 - INFO - drfile å·²å®‰è£…: /usr/local/bin/drfile
2026-02-28 14:45:49,717 - INFO - drfile ç‰ˆæœ¬: 1.31.4
2026-02-28 14:45:49,718 - INFO - å¼€å§‹æ‰¹é‡ä¸‹è½½ï¼Œå…± 1 ä¸ª trip
2026-02-28 14:45:49,718 - INFO - è¾“å‡ºç›®å½•: /path/to/trips

2026-02-28 14:45:49,718 - INFO - è¿›åº¦: [1/1]
2026-02-28 14:45:49,718 - INFO - ============================================================
2026-02-28 14:45:49,718 - INFO - å¼€å§‹ä¸‹è½½ trip: YR-P789-19_20260213_012754
2026-02-28 14:45:50,939 - INFO - âœ“ Trip å­˜åœ¨: YR-P789-19_20260213_012754
2026-02-28 14:45:50,939 - INFO - é€‰æ‹©æ€§ä¸‹è½½æ¨¡å¼ï¼š
2026-02-28 14:45:50,939 - INFO -   ä¸‹è½½å­ç›®å½•: bags/important
2026-02-28 14:46:30,123 - INFO -   âœ“ bags/important: 5 ä¸ªæ–‡ä»¶
2026-02-28 14:46:30,124 - INFO -   ä¸‹è½½å­ç›®å½•: configs
2026-02-28 14:46:35,456 - INFO -   âœ“ configs: 12 ä¸ªæ–‡ä»¶
2026-02-28 14:46:35,456 - INFO - âœ“ ä¸‹è½½æˆåŠŸ: YR-P789-19_20260213_012754 (2/2 ä¸ªç›®å½•)
2026-02-28 14:46:35,789 - INFO -   æ€»è®¡ - æ–‡ä»¶æ•°: 17, ç›®å½•æ•°: 2

2026-02-28 14:46:35,789 - INFO - ============================================================
2026-02-28 14:46:35,789 - INFO - ä¸‹è½½å®Œæˆï¼
2026-02-28 14:46:35,789 - INFO - æˆåŠŸ: 1/1
2026-02-28 14:46:35,789 - INFO - å¤±è´¥: 0/1
```

## ðŸ› æ•…éšœæŽ’é™¤

### é—®é¢˜ 1ï¼šdrfile æœªå®‰è£…
```bash
# é”™è¯¯ï¼šdrfile æœªå®‰è£…ï¼Œè¯·å…ˆå®‰è£… drfile å·¥å…·
sudo apt install deeproute-drfile-dev
```

### é—®é¢˜ 2ï¼šè®¤è¯å¤±è´¥
```bash
# é‡æ–°é…ç½®è®¤è¯ä¿¡æ¯
drfile configure
```

### é—®é¢˜ 3ï¼štrip ä¸å­˜åœ¨
```bash
# ä½¿ç”¨ --check-only éªŒè¯ trip åç§°
python3 download_trips.py --check-only YR-P789-19_20260213_012754

# æˆ–ç›´æŽ¥ç”¨ drfile æŸ¥è¯¢
drfile head trip:/YR-P789-19_20260213_012754
```

### é—®é¢˜ 4ï¼šéƒ¨åˆ†ç›®å½•ä¸‹è½½å¤±è´¥
```
# æ—¥å¿—ä¼šæ˜¾ç¤ºå“ªäº›ç›®å½•å¤±è´¥
2026-02-28 14:46:30,124 - WARNING -   âœ— bags/important ä¸‹è½½å¤±è´¥æˆ–ä¸å­˜åœ¨

# å¯èƒ½åŽŸå› ï¼š
# 1. è¯¥ç›®å½•åœ¨ trip ä¸­ä¸å­˜åœ¨ï¼ˆæ­£å¸¸æƒ…å†µï¼Œè·³è¿‡å³å¯ï¼‰
# 2. ç½‘ç»œé—®é¢˜ï¼ˆæŸ¥çœ‹æ—¥å¿—è¯¦ç»†é”™è¯¯ï¼‰
# 3. æƒé™é—®é¢˜ï¼ˆç¡®è®¤æœ‰ trip ç©ºé—´çš„è¯»æƒé™ï¼‰
```

## ðŸ“š ç›¸å…³æ–‡æ¡£

- [å¿«é€Ÿå¼€å§‹æŒ‡å—](./QUICKSTART.md) - ä¸€åˆ†é’Ÿä¸Šæ‰‹
- [drfile å®˜æ–¹æ–‡æ¡£](https://doc.deeproute.ai/drfile/) - drfile å·¥å…·æ–‡æ¡£

## ðŸ¤ æ”¯æŒ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·è”ç³»ç›¸å…³å¼€å‘äººå‘˜ã€‚

## ðŸ“„ è®¸å¯è¯

å†…éƒ¨å·¥å…·ï¼Œä»…ä¾› DeepRoute å†…éƒ¨ä½¿ç”¨ã€‚
